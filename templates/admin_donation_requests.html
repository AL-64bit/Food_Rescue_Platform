{% extends "base.html" %}

{% block title %}Donation Requests{% endblock %}

{% block content %}
<div class="container">
    <h1 style="margin-bottom: 10px;">Requests for Donation #{{ donation.id }}</h1>
    <p style="color: #666; margin-top: 0;">
        <strong>{{ donation.foodType }}</strong> — {{ donation.quantity }} • {{ donation.location }} • Expires: {{ donation.expiry }}
    </p>

    {% if requests|length == 0 %}
        <p style="color: #999; padding: 30px; text-align: center;">No requests for this donation.</p>
    {% else %}
        <div style="display: grid; gap: 12px; margin-top: 15px;">
            {% for req in requests %}
            <div style="background: #fff; padding: 12px; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); display:flex; justify-content:space-between; align-items:center;">
                <div>
                    <div style="font-weight: bold;">{{ req.user.username }}</div>
                    <div style="color:#666; font-size: 13px;">Requested: {{ req.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                    <div style="margin-top:6px; font-size:13px; color:#444;">Status: <strong>{{ req.status }}</strong></div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size:12px; color:#666;">Request ID: {{ req.id }}</div>
                    {% if req.status == 'pending' %}
                        <div style="margin-top:8px; color:#777; font-size:12px;">Pending — only donor can approve/reject</div>
                    {% else %}
                        <div style="margin-top:8px; color:#777; font-size:12px;">Updated: {{ req.updated_at.strftime('%Y-%m-%d %H:%M') }}</div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% endif %}

    <div style="margin-top: 30px;">
        <a href="{{ url_for('admin_dashboard') }}" class="btn">← Back to Admin</a>
    </div>
</div>
{% endblock %}
